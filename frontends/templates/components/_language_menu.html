{% load i18n %}
<ul class="dropdown-menu dropdown-menu-end dropdown-menu-base dropdown-menu-select" 
    aria-labelledby="{{ dropdown_id }}"
    role="menu">
  {% get_language_info_list for LANGUAGES as languages %}
  {% for lang in languages %}
  <li role="none">
    <form action="{% url 'set_language' %}" method="post">
      {% csrf_token %}
      <input type="hidden" name="next" value="{{ redirect_to|default:request.path }}">
      <input type="hidden" name="language" value="{{ lang.code }}">
      <button type="submit" 
              class="dropdown-item{% if lang.code == LANGUAGE_CODE %} active{% endif %}"
              role="menuitem"
              {% if lang.code == LANGUAGE_CODE %}aria-current="true"{% endif %}>
        {{ lang.name_local }}
      </button>
    </form>
  </li>
  {% endfor %}
</ul>