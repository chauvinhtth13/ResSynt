<!-- frontends/templates/components/dropdown/user_menu.html -->
{% load i18n %}
{% load static %}

<div class="dropdown">
  <button class="btn btn-link text-dark p-0" 
          type="button" 
          data-bs-toggle="dropdown" 
          aria-expanded="false"
          aria-label="{% trans 'User menu' %}">
    <div class="d-flex align-items-center">
      {% if user.profile.avatar %}
        <img src="{{ user.profile.avatar.url }}" 
             alt="{{ user.get_full_name }}" 
             class="rounded-circle"
             width="32" 
             height="32"
             style="object-fit: cover;">
      {% else %}
        <div class="rounded-circle bg-primary text-white d-flex align-items-center justify-content-center" 
             style="width: 32px; height: 32px;">
          <span class="small fw-medium">{{ user.first_name|slice:":1"|upper }}{{ user.last_name|slice:":1"|upper }}</span>
        </div>
      {% endif %}
      <i class="bi bi-chevron-down ms-1 small"></i>
    </div>
  </button>
  
  <ul class="dropdown-menu dropdown-menu-end shadow">
    <!-- User Info -->
    <li class="px-3 py-2">
      <div class="fw-semibold">{{ user.get_full_name|default:user.username }}</div>
      <small class="text-muted">{{ user.email }}</small>
    </li>
    
    <li><hr class="dropdown-divider"></li>
    
    <!-- Menu Items -->
    <li>
      <a href="" class="dropdown-item">
        <i class="bi bi-person me-2"></i>{% trans 'My Profile' %}
      </a>
    </li>
    <li>
      <a href="" class="dropdown-item">
        <i class="bi bi-gear me-2"></i>{% trans 'Settings' %}
      </a>
    </li>
    
    <li><hr class="dropdown-divider"></li>
    
    <!-- Logout -->
    <li>
      <form action="{% url 'account_logout' %}" method="post">
        {% csrf_token %}
        <button type="submit" class="dropdown-item text-danger">
          <i class="bi bi-box-arrow-right me-2"></i>{% trans 'Logout' %}
        </button>
      </form>
    </li>
  </ul>
</div>