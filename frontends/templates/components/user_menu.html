<!-- frontends/templates/components/dropdown/user_menu.html -->
{% load i18n %}
{% load static %}

<div class="dropdown">
  <button class="btn btn-nav-action dropdown-toggle" 
          type="button" 
          data-bs-toggle="dropdown" 
          aria-expanded="false"
          aria-label="{% trans 'User Menu' %}">
    <i class="bi bi-person-fill-gear"></i>
  </button>
  
  <ul class="dropdown-menu dropdown-menu-end dropdown-menu-base dropdown-menu-action">
    <!-- User Info -->
    <li class="dropdown-header">
        <div class="dropdown-header-name">{{ user.get_full_name|default:user.username }}</div>
        <small class="dropdown-header-meta">{{ user.email }}</small>
    </li>
    
    <li><hr class="dropdown-divider"></li>
    
    <!-- Menu Items -->
    <li>
      <a href="" class="dropdown-item">
        <i class="bi bi-person me-2"></i>{% trans 'My Profile' %}
      </a>
    </li>
    <li>
      <a href="" class="dropdown-item">
        <i class="bi bi-gear me-2"></i>{% trans 'Settings' %}
      </a>
    </li>

    
    
    
    <!-- Back to Select Study (conditional) -->
    {% if show_back_to_study %}
    <li><hr class="dropdown-divider"></li>
    <li>
      <a href="{% url 'select_study' %}" class="dropdown-item">
        <i class="bi bi-arrow-left-circle me-2"></i>{% trans 'Select another study' %}
      </a>
    </li>
    {% endif %}
    

    <li><hr class="dropdown-divider"></li>
    
    <!-- Logout -->
    <li>
      <form action="{% url 'account_logout' %}" method="post">
        {% csrf_token %}
        <button type="submit" class="dropdown-item dropdown-item-danger">
          <i class="bi bi-box-arrow-right me-2 text-danger"></i>{% trans 'Logout' %}
        </button>
      </form>
    </li>
  </ul>
</div>