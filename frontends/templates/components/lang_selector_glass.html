<!-- frontends\templates\includes\lang_switcher_glass.html -->
{% load static i18n %}

<nav aria-label="{% trans 'Language Selection' %}">
    <div class="dropdown">
        <button class="btn btn-glass-neon dropdown-toggle" 
                type="button" 
                id="languageDropdown"
                data-bs-toggle="dropdown" 
                aria-expanded="false"
                aria-haspopup="true">
            <i class="bi bi-globe2" aria-hidden="true"></i>
            {% get_language_info for LANGUAGE_CODE as current %}
            <span>{{ current.name_local }}</span>
        </button>

        <ul class="dropdown-menu dropdown-menu-end dropdown-menu-glass-neon" 
            aria-labelledby="languageDropdown"
            role="menu">
            {% get_language_info_list for LANGUAGES as languages %}
            {% for lang in languages %}
            <li role="none">
                <form action="{% url 'set_language' %}" method="post">
                    {% csrf_token %}
                    <input type="hidden" name="next" value="{{ request.path }}">
                    <input type="hidden" name="language" value="{{ lang.code }}">
                    <button type="submit" 
                            class="dropdown-item{% if lang.code == LANGUAGE_CODE %} active{% endif %}"
                            role="menuitem"
                            {% if lang.code == LANGUAGE_CODE %}aria-current="true"{% endif %}>
                        {{ lang.name_local }}
                    </button>
                </form>
            </li>
            {% endfor %}
        </ul>
    </div>
</nav>