<!-- frontends/templates/components/header.html -->
{% load static i18n %}

<nav class="navbar navbar-expand bg-white border-bottom shadow-sm {{ position|default:'sticky-top' }}" 
     {% if position == 'fixed-top' %}style="z-index: 1030;"{% endif %}>
  <div class="container-fluid">
    
    <!-- Left Section -->
    <div class="d-flex align-items-center">
      {% if show_sidebar_toggle %}
        <button class="btn btn-link me-2" type="button" id="sidebarToggle" aria-label="{% trans 'Toggle sidebar' %}">
          <i class="bi bi-list fs-4 text-dark"></i>
        </button>
      {% endif %}
      
      {% if show_logo %}
        <a href="{% url 'home' %}" class="navbar-brand m-0">
          <img src="{% static 'base/images/logo.png' %}" 
               alt="ResSync Logo" 
               height="30"
               class="d-block">
        </a>
      {% endif %}
    </div>

    <!-- Center Section -->
    {% if page_title %}
      <div class="flex-grow-1">
        <nav aria-label="breadcrumb">
          <ol class="breadcrumb mb-0">
            {% if breadcrumbs %}
              {% for crumb in breadcrumbs %}
                {% if forloop.last %}
                  <li class="breadcrumb-item active" aria-current="page">{{ crumb.title }}</li>
                {% else %}
                  <li class="breadcrumb-item">
                    <a href="{{ crumb.url }}" class="text-decoration-none">{{ crumb.title }}</a>
                  </li>
                {% endif %}
              {% endfor %}
            {% else %}
              <li class="breadcrumb-item active" aria-current="page">{{ page_title }}</li>
            {% endif %}
          </ol>
        </nav>
      </div>
    {% else %}
      <div class="flex-grow-1"></div>
    {% endif %}

    <!-- Right Section -->
    <div class="d-flex align-items-center">
      {% if show_notifications %}
        {% include 'components/notification_menu.html' %}
        <div class="vr mx-2"></div>
      {% endif %}
      
      {% if show_language_selector|default:True %}
        {% include 'components/lang_selector_basic.html' %}
        <div class="vr mx-2"></div>
      {% endif %}
      
      {% if show_user_menu|default:True %}
        {% include 'components/user_menu.html' %}
      {% endif %}
    </div>
    
  </div>
</nav>

{% if position == 'fixed-top' %}
  <!-- Spacer để content không bị che bởi fixed navbar -->
  <div style="height: 56px;"></div>
{% endif %}