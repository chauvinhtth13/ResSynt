<!-- frontends\templates\includes\language_selector.html -->
{% load static i18n %}



<div class="dropdown">
    <button class="btn btn-glass dropdown-toggle" type="button" 
            id="languageDropdown" 
            data-bs-toggle="dropdown" 
            aria-expanded="false">
        <i class="bi bi-globe2" aria-hidden="true"></i>
        {% get_language_info for LANGUAGE_CODE as current %}
        <span>{{ current.name_local }}</span>
    </button>
    
    <ul class="dropdown-menu dropdown-menu-end dropdown-menu-glass" 
        aria-labelledby="languageDropdown">
        {% get_language_info_list for LANGUAGES as languages %}
        {% for lang in languages %}
        <li>
            <form action="{% url 'set_language' %}" method="post">
                {% csrf_token %}
                <input type="hidden" name="next" value="{{ request.path }}">
                <input type="hidden" name="language" value="{{ lang.code }}">
                <button type="submit" 
                        class="dropdown-item{% if lang.code == LANGUAGE_CODE %} active{% endif %}">
                    {{ lang.name_local }}
                </button>
            </form>
        </li>
        {% endfor %}
    </ul>
</div>
