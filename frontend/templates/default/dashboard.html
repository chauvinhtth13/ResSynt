<!-- frontend\templates\default\dashboard.html -->
{% load static i18n %}
<!DOCTYPE html>
{% get_current_language as LANGUAGE_CODE %}
<html lang="{{ LANGUAGE_CODE|default:'vi' }}">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, viewport-fit=cover"
    />

    <title>ResSync Dashboard</title>

    <link rel="stylesheet" href="{% static 'css/default/base.css' %}" />
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="{% static 'css/default/dashboard.css' %}" />
  </head>

  <body class="bg-gray-100 text-gray-700 h-screen overflow-hidden">
    <div class="relative flex h-full">
      <aside
        id="sidebar"
        class="bg-blue-950 text-gray-100 flex flex-col"
        role="navigation"
        aria-label="{% trans 'Primary navigation' %}"
      >
        <div class="flex items-center px-2 py-2 ml-2">
          <div class="flex items-center gap-3">
            {% if study_folder %}
              <div class="flex-shrink-0 p-1 bg-white rounded-lg border border-white/10">
                <img
                  src="{% static 'images/studies/'|add:study_folder|add:'/logo.webp' %}"
                  alt="{% trans 'Study logo' %}"
                  loading="lazy"
                  class="h-10 w-auto object-contain"
                  decoding="async"
                  onerror="this.parentElement.style.display='none';"
                />
              </div>
            {% endif %}
            <div class="flex flex-col">
              <h1 class="text-lg font-bold text-white tracking-wide">
                {{ request.study.code|upper }}
              </h1>
              <p class="text-sm text-slate-300 font-medium">
                Research Study
              </p>
            </div>
          </div>
        </div>
        {% include 'studies/'|add:study_folder|add:'/sidebar.html' %}
      </aside>

      <div class="flex-1 flex flex-col min-w-0">
        {% include 'includes/header.html' with request=request %}
        <main class="flex-1 overflow-y-auto p-6 md:p-8"></main>
      </div>
    </div>

    <!-- Core JavaScript -->
    <script src="{% static 'js/default/base.js' %}" defer></script>
    
    <!-- Dashboard Module -->
    <script type="module" src="{% static 'js/default/dashboard.js' %}"></script>
    
    <!-- Study-specific JavaScript (if available) -->
    {% if study_folder %}
      {% with study_js='js/studies/'|add:study_folder|add:'/custom.js' %}
        <script type="module" src="{% static study_js %}"></script>
      {% endwith %}
    {% endif %}
  </body>
</html>
